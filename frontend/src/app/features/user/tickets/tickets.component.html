<div class="p-6">
    <div
        class="max-w-4xl mx-auto min-h-[calc(100vh-7rem)] bg-black/20 backdrop-blur-sm rounded-2xl border border-white/10 shadow-2xl overflow-hidden p-6">
        <h1 class="text-3xl font-bold text-white mb-6">Mis Tickets</h1>

        <!-- Loading State -->
        <app-loader [show]="isLoading()" [message]="'Cargando tickets...'" />

        <!-- Empty State -->
        @if (!isLoading() && tickets().length === 0) {
        <div class="text-center py-12 bg-white/5 rounded-xl border border-white/10">
            <div class="text-6xl mb-4">üéüÔ∏è</div>
            <p class="text-gray-400 text-lg mb-2">No tienes tickets a√∫n</p>
            <p class="text-gray-500 text-sm mb-6">Compra tu primer ticket para empezar a disfrutar</p>
            <a routerLink="/discover"
                class="inline-block px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-500 transition-colors">
                Explorar Eventos
            </a>
        </div>
        }

        <!-- Tickets Grid -->
        <div class="grid gap-4">
            @for (ticket of tickets(); track ticket.id) {
            <div
                class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-6 hover:border-primary-500/50 transition-all">
                <div class="flex justify-between items-start mb-4">
                    <div class="flex-1">
                        <h3 class="text-xl font-bold text-white mb-1">{{ ticket.eventTitle }}</h3>
                        <p class="text-gray-400 text-sm">
                            {{ formatDate(ticket.eventDate) }} ‚Ä¢ {{ formatTime(ticket.eventDate) }}
                        </p>
                        @if (ticket.pricePaid === 0) {
                        <p class="text-green-400 font-semibold mt-2">Gratis</p>
                        } @else {
                        <p class="text-primary-400 font-semibold mt-2">{{ formatPrice(ticket.pricePaid) }}</p>
                        }
                    </div>

                    @if (ticket.isUsed) {
                    <span class="px-3 py-1 bg-gray-700 text-gray-400 rounded-full text-xs font-bold">
                        Usado
                    </span>
                    } @else {
                    <span
                        class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-bold border border-green-500/20">
                        Activo
                    </span>
                    }
                </div>

                <!-- QR Code -->
                <div class="bg-white p-4 rounded-lg">
                    <div class="text-center">
                        <p class="text-gray-700 text-xs mb-2 font-mono font-bold">{{ ticket.qrCode }}</p>
                        <div
                            class="w-48 h-48 mx-auto bg-gray-200 flex items-center justify-center border-2 border-gray-300 rounded">
                            <div class="text-center">
                                <p class="text-gray-600 text-xs font-bold mb-1">QR CODE</p>
                                <p class="text-gray-500 text-xs">{{ ticket.qrCode.substring(0, 8) }}...</p>
                            </div>
                        </div>
                        <p class="text-gray-600 text-xs mt-2">Mostrar este c√≥digo en la entrada</p>
                    </div>
                </div>
            </div>
            }
        </div>

        <!-- Stats -->
        @if (tickets().length > 0) {
        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4 text-center">
                <div class="text-2xl font-bold text-primary-400">{{ ticketStats().total }}</div>
                <div class="text-gray-400 text-sm">Total de Tickets</div>
            </div>
            <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4 text-center">
                <div class="text-2xl font-bold text-green-400">{{ ticketStats().active }}</div>
                <div class="text-gray-400 text-sm">Activos</div>
            </div>
            <div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-xl p-4 text-center">
                <div class="text-2xl font-bold text-gray-400">{{ ticketStats().used }}</div>
                <div class="text-gray-400 text-sm">Usados</div>
            </div>
        </div>
        }
    </div>
</div>